<div class="container mt-5 py-5" id="pqrsf">
  <div class="row justify-content-center">
    <div class="card border-0 p-0" style="max-width: 600px; margin: auto; font-size: 0.95rem;">

      <!-- Título con degradado e ícono -->
      <div class="cards-title-wrapper animate-fadeInUp mb-3 mt-3">
        <div class="d-flex justify-content-center align-items-center gap-2">
          <i class="fa-solid fa-users text-info fs-2" style="position: relative; top: -10px;"></i>
          <h2 class="gradient-title mb-0">Trabaja con Nosotros</h2>
        </div>
      </div>

      <!-- Card formulario -->
      <div class="rounded">
        <div class="card-header text-center text-white fs-6 py-2"
          style="background: linear-gradient(to right, #0056b3, #007bff);">
          Formulario PQRSF
        </div>

        <div class="card-body shadow rounded p-3">

          <!-- Mientras carga -->
          <div *ngIf="!form || !campos.length" class="alert alert-info text-center fs-6">
            Cargando formulario...
          </div>

          <!-- Formulario -->
          <form *ngIf="form && campos.length" [formGroup]="form" (ngSubmit)="onSubmit()">

            <div class="row mb-2" *ngFor="let row of chunkFields(campos, 2)">
              <div *ngFor="let campo of row" class="col-md-{{ campo.col }} mt-2 mt-md-0">

                <label class="form-label d-flex justify-content-center align-items-center gap-2 fs-6">
                  <i class="fa-solid {{ campo.icon }} text-info"></i>
                  {{ campo.label }}
                </label>

                <ng-container [ngSwitch]="campo.type">
                  <input
                    *ngSwitchCase="'text'"
                    type="text"
                    [formControlName]="campo.name"
                    class="form-control form-control-sm text-center fs-6"
                    [ngClass]="{ 'is-invalid': form.get(campo.name)?.touched && form.get(campo.name)?.invalid }" />

                  <input
                    *ngSwitchCase="'email'"
                    type="email"
                    [formControlName]="campo.name"
                    class="form-control form-control-sm text-center fs-6"
                    [ngClass]="{ 'is-invalid': form.get(campo.name)?.touched && form.get(campo.name)?.invalid }" />

                  <select
                    *ngSwitchCase="'select'"
                    [formControlName]="campo.name"
                    class="form-select form-select-sm text-center fs-6"
                    [ngClass]="{ 'is-invalid': form.get(campo.name)?.touched && form.get(campo.name)?.invalid }">
                    <option value="">Seleccione una opción</option>
                    <option *ngFor="let option of campo.options || []" [value]="option.value">
                      {{ option.text }}
                    </option>
                  </select>

                  <textarea
                    *ngSwitchCase="'textarea'"
                    [formControlName]="campo.name"
                    class="form-control form-control-sm text-center fs-6"
                    rows="2"
                    [ngClass]="{ 'is-invalid': form.get(campo.name)?.touched && form.get(campo.name)?.invalid }">
                  </textarea>
                </ng-container>

                <!-- Mensajes de error -->
                <div *ngIf="form.get(campo.name)?.touched && form.get(campo.name)?.hasError('required')" class="text text-danger fs-6">
                  Este campo es obligatorio
                </div>
                <div *ngIf="campo.type === 'email' && form.get(campo.name)?.touched && form.get(campo.name)?.hasError('email')" class="text text-danger fs-6">
                  Ingresa un correo válido
                </div>
              </div>
            </div>
            <!-- Radio Buttons de Acepto -->
            <div class="mb-2">
              <p class="text-muted text-center fs-6">
                En mi calidad de titular de los datos personales diligenciados,
                autorizo el tratamiento de mis datos para fines relacionados con
                mi solicitud.
              </p>
              <div class="d-flex justify-content-center gap-4">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    [checked]="form.get('accept')?.value === 'Si'"
                    (click)="onRadioClick('Si')"
                    id="acceptSi"
                  />
                  <label class="form-check-label fs-6" for="acceptSi">Sí</label>
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    [checked]="form.get('accept')?.value === 'No'"
                    (click)="onRadioClick('No')"
                    id="acceptNo"
                  />
                  <label class="form-check-label fs-6" for="acceptNo">No</label>
                </div>
              </div>
              <div
                *ngIf="form.get('accept')?.touched && form.get('accept')?.hasError('required')"
                class="text text-danger mt-1 fs-6"
              >
                Debes indicar si aceptas el tratamiento de datos.
              </div>
            </div>


            <!-- Botón -->
            <div class="btn-wrapper text-center mt-3">
              <button
                class="btn btn-sm text-white px-3 py-2 fs-6 border-0"
                style="background: linear-gradient(to right, #0056b3, #007bff);"
                type="submit">
                Enviar Solicitud
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>
